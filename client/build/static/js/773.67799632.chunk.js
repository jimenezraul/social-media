"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[773],{5773:function(e,s,l){l.r(s),l.d(s,{PostById:function(){return v}});var t=l(1413),a=l(7689),r=l(6578),n=l(2152),c=l(5746),o=l(4165),i=l(5861),d=l(885),m=l(1087),u=l(4376),x=l(1029),f=l(2791),h=l(184),p=function(e){var s=e._id,l=e.commentAuthor,t=e.createdAtFormatted,a=e.commentText,r=e.likesCount,n=e.likes,c=e.replies,p=e.isLastEl,b=(0,f.useRef)(null),v=(0,u.D)(x.O4),j=(0,d.Z)(v,1)[0],N=c.length<=1?"reply":"replies",g=c.length;(0,f.useEffect)((function(){var e=window.location.hash;if(b.current&&e==="#".concat(s)&&(b.current.scrollIntoView({behavior:"smooth"}),!document.querySelector("#new-comment"))){var t=document.createElement("div");t.id="new-comment",t.classList.add("bg-default","p-2","rounded-md","text-white","mb-2"),t.innerText="New comment from ".concat(l.fullName,"."),b.current.prepend(t)}}),[s,l.fullName]);var w=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j({variables:{commentId:s}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return(0,h.jsx)("div",{ref:b,id:s,className:"".concat(p&&"mb-24 md:mb-6"," my-2 bg-slate-800 rounded-lg shadow-xl p-5 border border-slate-700 transition-all duration-300"),children:(0,h.jsxs)("div",{className:"flex items-start mb-4",children:[(0,h.jsx)("img",{className:"w-10 h-10 rounded-full mr-4 bg-default p-0.5",src:"".concat(l.profileUrl),alt:"",referrerPolicy:"no-referrer"}),(0,h.jsxs)("div",{className:"flex flex-col w-full",children:[(0,h.jsx)("div",{className:"flex items-center",children:(0,h.jsx)(m.rU,{className:"inline-block text-lg font-bold mr-2",to:"#",children:l.fullName})}),(0,h.jsx)("div",{className:"mb-3 pb-2 text-slate-300 border-b",children:(0,h.jsx)("span",{className:"text-sm text-slate-400 italic",children:t})}),(0,h.jsx)("p",{className:"text-slate-300",children:a}),(0,h.jsxs)("div",{className:"pt-6",children:[(0,h.jsxs)("div",{className:"flex justify-between items-center",children:[(0,h.jsx)("span",{className:"-m-1 rounded-full border-2 border-slate-800",children:(0,h.jsx)("i",{className:"".concat(r>0&&"bg-blue-600 rounded-full"," fa-solid fa-thumbs-up p-2")})}),(0,h.jsx)("span",{className:"text-lg font-bold ml-3",children:r}),n.length>0&&(0,h.jsxs)("div",{className:"ml-3 flex items-center relative w-1/2",children:[n.map((function(e,s){var l=0===s?"left-0":1===s?"left-4":"left-8";return s<3?(0,h.jsx)("img",{className:"absolute w-8 h-8 ".concat(l," rounded-full border border-slate-500 bg-default"),src:"".concat(e.profileUrl),alt:"",referrerPolicy:"no-referrer"},e._id):null})),n.length>3&&(0,h.jsxs)("span",{className:"text-slate-300 ml-2",children:["+",n.length-3]})]}),(0,h.jsxs)("p",{className:"ml-auto",children:[g," ",N]})]}),(0,h.jsx)("div",{className:"mt-6 mb-6 h-px bg-slate-500"}),(0,h.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,h.jsxs)("button",{onClick:w,className:"py-2 px-4 font-medium hover:bg-slate-700 rounded-lg",children:[(0,h.jsx)("i",{className:"fa-solid fa-thumbs-up"})," Like"]}),(0,h.jsx)(m.rU,{to:"/comment/".concat(s),children:(0,h.jsxs)("button",{className:"py-2 px-4 font-medium hover:bg-slate-700 rounded-lg",children:[(0,h.jsx)("i",{className:"fa-sharp fa-solid fa-comment-dots"})," Replies"]})}),(0,h.jsxs)("button",{className:"py-2 px-4 font-medium hover:bg-slate-700 rounded-lg",children:[(0,h.jsx)("i",{className:"fa-sharp fa-solid fa-share-nodes"})," Share"]})]}),(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsx)("input",{className:"pt-2 pb-2 pl-3 w-full h-11 bg-slate-700 rounded-lg placeholder:text-slate-300 font-medium pr-20",type:"text",placeholder:"Reply to a comment"}),(0,h.jsx)("span",{className:"flex absolute right-3 top-2/4 -mt-3 items-center",children:(0,h.jsx)("svg",{className:"fill-slate-50 h-6 cursor-pointer",viewBox:"0 0 24 24",children:(0,h.jsx)("path",{d:"M2,21L23,12L2,3V10L17,12L2,14V21Z"})})})]})]})]})]},s)})},b=l(5478),v=function(){var e,s,l=(0,a.UO)().id,o=(0,r.a)(n.bW,{variables:{postId:l}}),i=o.loading,d=o.error,m=o.data,u=o.subscribeToMore;return(0,f.useEffect)((function(){u&&((0,b.zY)(u),(0,b.Z4)(u),(0,b.e8)(u))}),[u]),i?(0,h.jsx)("div",{children:"Loading..."}):d?(0,h.jsx)("div",{children:"Error..."}):(0,h.jsx)("div",{className:"flex flex-1 text-white",children:(0,h.jsx)("div",{className:"container mx-auto",children:(0,h.jsx)("div",{className:"flex flex-wrap justify-center h-full max-h-full",children:(0,h.jsxs)("div",{className:"flex flex-col  w-full md:w-7/12 xl:w-5/12 px-3 h-full overflow-y-scroll no-scrollbar",children:[(0,h.jsx)(c.S,(0,t.Z)({},m.post)),(0,h.jsx)("h1",{className:"text-xl mb-2 font-bold",children:"Comments"}),0===(null===m||void 0===m||null===(e=m.post)||void 0===e||null===(s=e.comments)||void 0===s?void 0:s.length)&&(0,h.jsx)("div",{className:"my-2 text-center bg-slate-800 rounded-lg shadow-xl p-5 border border-slate-700",children:(0,h.jsx)("div",{className:"text-gray-400",children:"No comments yet"})}),m.post.comments.map((function(e,s){var l=s===m.post.comments.length-1;return(0,h.jsx)(p,(0,t.Z)((0,t.Z)({},e),{},{isLastEl:l}),s)}))]})})})})}}}]);
//# sourceMappingURL=773.67799632.chunk.js.map